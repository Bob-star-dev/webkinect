# Web Kinect
- HTTP Web server to allow using Microsoft Kinect in web pages trough [WebSockets](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API).
   - Works with Kinect 1.0 only should be easily adaptable to work with Kinect 2.0 but I do not have access to one for testing.
- Allows raw access to the Kinect cameras information (Depth and Color image) and access to the human skeleton generated by the [Kinect SDK](https://www.microsoft.com/en-us/download/details.aspx?id=44561).
- **NEW: 3D Scanning Feature** - Scan objects in front of Kinect and export to STL format!
- The server runs by default in the `localhost` at port `8181` the browser should be able to communicate with the server without additional configurations even on HTTPS.
- A compiled version of the program is available on the `bin` folder in the root of the Git repository.



### Usage Example

- There is a usage example available in the example page intended to be used alongside with [three.js](https://threejs.org/)
- The communication with the server is performed using  `JSON` encoded messages for the skeleton data and `Blob` encoded binary data for the images captured from the cameras.
- Here is a basic example of how we can exchange information with the Kinect server.
- The URL of the image could be easily placed inside of an `img` element for visualization. Its also possible to copy the blob data to a `WebGL` texture for processing.

```javascript
var socket = new WebSocket("ws://127.0.0.1:8181");
var connected = false;

socket.onopen = function() {
	connected = true;
};

socket.onclose = function() {
	connected = false;
};

socket.onmessage = function(event) {
	// Skeleton data
	if(typeof event.data === "string") {
		var data = JSON.parse(event.data);
		// ...
	}
	// Camera feed
	else if(event.data instanceof Blob) {
		var camera = event.data;
		var url = URL.createObjectURL(event.data);
		// ...
	}
};
```

### 3D Scanning & STL Export

Fitur baru untuk melakukan 3D scanning object dan export ke format STL:

**Server Modes:**
- `Color` - Sends color camera feed (JPEG)
- `Depth` - Sends depth camera feed (JPEG)  
- `RawDepth` - Sends raw depth data (JSON) untuk 3D scanning

**Cara menggunakan:**

1. **Jalankan server:**
   - Buka `bin/server.exe` (atau compile dari source)

2. **Buka halaman scanning:**
   - Buka file `example/scan3d.html` di browser
   - Atau buka dengan `file:///path/to/webkinect/example/scan3d.html`

3. **Langkah-langkah scanning:**
   - Klik "Hubungkan" untuk terhubung ke server Kinect
   - Atur Min/Max Depth sesuai kebutuhan (default: 850-3000mm)
   - Atur Point Skip untuk performa (semakin besar, semakin cepat tapi kurang detail)
   - Klik "Mulai Scan" untuk mulai capture depth data
   - Posisikan object di depan Kinect (dalam range depth yang ditentukan)
   - Tunggu beberapa detik untuk mengumpulkan cukup points
   - Klik "Stop Scan" untuk menghentikan capture
   - Klik "Export STL" untuk download file 3D model

4. **Tips untuk hasil terbaik:**
   - Object harus berada dalam range depth 850-4095mm
   - Gunakan lighting yang cukup untuk hasil terbaik
   - Object dengan permukaan yang tidak terlalu reflektif akan lebih mudah di-scan
   - Semakin banyak frames yang di-capture, semakin detail hasilnya
   - File STL yang dihasilkan dapat dibuka di software 3D seperti Blender, MeshLab, atau slicer untuk 3D printing

**Fitur yang tersedia:**
- Real-time point cloud visualization menggunakan Three.js
- Capture multiple frames untuk akumulasi data
- Generate 3D mesh dari point cloud dengan spatial hashing
- Export ke format STL untuk 3D printing
- Interactive 3D viewer dengan mouse controls (drag to rotate, scroll to zoom)

### License

- Project uses a MIT license that allow for commercial usage of the platform without any cost.
- The license is available on the project GitHub page
